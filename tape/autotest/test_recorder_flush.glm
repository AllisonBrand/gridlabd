// test_recorder_flush.glm tests to make sure the recorder flush operation is correct 
// A. Ivanova Oct 9, 2018

/////////////////////////////////////////////
// BEGIN
/////////////////////////////////////////////

#set show_progress=FALSE

clock {
	timezone EST+5EDT;
	starttime '2000-01-01 0:00:00';
	stoptime '2000-01-02 0:00:00';
}

module tape;

class test {
	randomvar x;
}
object test {
	x "type:normal(0,1); min:-10; max:+10; refresh:1min";
	object recorder {
		property x;
		file recorder_flush_test2.csv;
		interval -1;
		flush 300;
		//flush -1;
		//flush 0;
		//interval 5;
	};
}

script on_sync "echo `tail -n 1 recorder_flush_test2.csv`";
script on_term "echo `tail -n 1 recorder_flush_test2.csv`";
